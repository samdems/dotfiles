(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){

var ko = require('knockout');
var components = require('ungit-components');

components.register('home', function(args) {
  return new HomeViewModel(args.app);
});

function HomeRepositoryViewModel(home, path) {
  this.home = home;
  this.app = home.app;
  this.server = this.app.server;
  this.path = path;
  this.title = path;
  this.link = ungit.config.rootPath + '/#/repository?path=' + encodeURIComponent(path);
  this.pathRemoved = ko.observable(false);
  this.remote = ko.observable('...');
  this.updateState();
}
HomeRepositoryViewModel.prototype.updateState = function() {
  var self = this;
  this.server.getPromise('/fs/exists?path=' + encodeURIComponent(this.path))
    .then(function(exists) { self.pathRemoved(!exists); })
    .catch((e) => this.server.unhandledRejection(e));
  this.server.getPromise('/remotes/origin?path=' + encodeURIComponent(this.path))
    .then(function(remote) {	self.remote(remote.address.replace(/\/\/.*?\@/, "//***@")); })
    .catch(function(err) { self.remote(''); });
}
HomeRepositoryViewModel.prototype.remove = function() {
  this.app.repoList.remove(this.path);
  this.home.update();
}

function HomeViewModel(app) {
  var self = this;
  this.app = app;
  this.repos = ko.observableArray();
  this.showNux = ko.computed(function() {
    return self.repos().length == 0;
  });
}
HomeViewModel.prototype.updateNode = function(parentElement) {
  ko.renderTemplate('home', this, {}, parentElement);
}
HomeViewModel.prototype.template = 'home';
HomeViewModel.prototype.shown = function() {
  this.update();
}
HomeViewModel.prototype.update = function() {
  var self = this;
  var reposByPath = {};
  this.repos().forEach(function(repo) { reposByPath[repo.path] = repo; });
  this.repos(this.app.repoList().sort().map(function(path) {
    if (!reposByPath[path])
      reposByPath[path] = new HomeRepositoryViewModel(self, path);
    return reposByPath[path];
  }));
}

},{"knockout":"knockout","ungit-components":"ungit-components"}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjb21wb25lbnRzL2hvbWUvaG9tZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJcbnZhciBrbyA9IHJlcXVpcmUoJ2tub2Nrb3V0Jyk7XG52YXIgY29tcG9uZW50cyA9IHJlcXVpcmUoJ3VuZ2l0LWNvbXBvbmVudHMnKTtcblxuY29tcG9uZW50cy5yZWdpc3RlcignaG9tZScsIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgcmV0dXJuIG5ldyBIb21lVmlld01vZGVsKGFyZ3MuYXBwKTtcbn0pO1xuXG5mdW5jdGlvbiBIb21lUmVwb3NpdG9yeVZpZXdNb2RlbChob21lLCBwYXRoKSB7XG4gIHRoaXMuaG9tZSA9IGhvbWU7XG4gIHRoaXMuYXBwID0gaG9tZS5hcHA7XG4gIHRoaXMuc2VydmVyID0gdGhpcy5hcHAuc2VydmVyO1xuICB0aGlzLnBhdGggPSBwYXRoO1xuICB0aGlzLnRpdGxlID0gcGF0aDtcbiAgdGhpcy5saW5rID0gdW5naXQuY29uZmlnLnJvb3RQYXRoICsgJy8jL3JlcG9zaXRvcnk/cGF0aD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhdGgpO1xuICB0aGlzLnBhdGhSZW1vdmVkID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7XG4gIHRoaXMucmVtb3RlID0ga28ub2JzZXJ2YWJsZSgnLi4uJyk7XG4gIHRoaXMudXBkYXRlU3RhdGUoKTtcbn1cbkhvbWVSZXBvc2l0b3J5Vmlld01vZGVsLnByb3RvdHlwZS51cGRhdGVTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuc2VydmVyLmdldFByb21pc2UoJy9mcy9leGlzdHM/cGF0aD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucGF0aCkpXG4gICAgLnRoZW4oZnVuY3Rpb24oZXhpc3RzKSB7IHNlbGYucGF0aFJlbW92ZWQoIWV4aXN0cyk7IH0pXG4gICAgLmNhdGNoKChlKSA9PiB0aGlzLnNlcnZlci51bmhhbmRsZWRSZWplY3Rpb24oZSkpO1xuICB0aGlzLnNlcnZlci5nZXRQcm9taXNlKCcvcmVtb3Rlcy9vcmlnaW4/cGF0aD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucGF0aCkpXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVtb3RlKSB7XHRzZWxmLnJlbW90ZShyZW1vdGUuYWRkcmVzcy5yZXBsYWNlKC9cXC9cXC8uKj9cXEAvLCBcIi8vKioqQFwiKSk7IH0pXG4gICAgLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBzZWxmLnJlbW90ZSgnJyk7IH0pO1xufVxuSG9tZVJlcG9zaXRvcnlWaWV3TW9kZWwucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmFwcC5yZXBvTGlzdC5yZW1vdmUodGhpcy5wYXRoKTtcbiAgdGhpcy5ob21lLnVwZGF0ZSgpO1xufVxuXG5mdW5jdGlvbiBIb21lVmlld01vZGVsKGFwcCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuYXBwID0gYXBwO1xuICB0aGlzLnJlcG9zID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7XG4gIHRoaXMuc2hvd051eCA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLnJlcG9zKCkubGVuZ3RoID09IDA7XG4gIH0pO1xufVxuSG9tZVZpZXdNb2RlbC5wcm90b3R5cGUudXBkYXRlTm9kZSA9IGZ1bmN0aW9uKHBhcmVudEVsZW1lbnQpIHtcbiAga28ucmVuZGVyVGVtcGxhdGUoJ2hvbWUnLCB0aGlzLCB7fSwgcGFyZW50RWxlbWVudCk7XG59XG5Ib21lVmlld01vZGVsLnByb3RvdHlwZS50ZW1wbGF0ZSA9ICdob21lJztcbkhvbWVWaWV3TW9kZWwucHJvdG90eXBlLnNob3duID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMudXBkYXRlKCk7XG59XG5Ib21lVmlld01vZGVsLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgcmVwb3NCeVBhdGggPSB7fTtcbiAgdGhpcy5yZXBvcygpLmZvckVhY2goZnVuY3Rpb24ocmVwbykgeyByZXBvc0J5UGF0aFtyZXBvLnBhdGhdID0gcmVwbzsgfSk7XG4gIHRoaXMucmVwb3ModGhpcy5hcHAucmVwb0xpc3QoKS5zb3J0KCkubWFwKGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBpZiAoIXJlcG9zQnlQYXRoW3BhdGhdKVxuICAgICAgcmVwb3NCeVBhdGhbcGF0aF0gPSBuZXcgSG9tZVJlcG9zaXRvcnlWaWV3TW9kZWwoc2VsZiwgcGF0aCk7XG4gICAgcmV0dXJuIHJlcG9zQnlQYXRoW3BhdGhdO1xuICB9KSk7XG59XG4iXX0=
